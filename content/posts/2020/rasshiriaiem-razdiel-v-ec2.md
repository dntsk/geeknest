---
title: "Расширяем раздел в EC2"
date: 2020-01-30
author: "Silver Ghost"
tags: ["Разное"]
image: "/images/old/code-terminal.jpg"
description: "Иногда, так случается, что надо расширить диск для какого-то EC2 инстанса. Это можно сделать не останавливая сам инстанс, чтоб не прерывать работу сервиса.

Для этого заходим в веб-консоль AWS, находим нужный volume и увеличиваем его размер.

Потом нужно увеличить раздел и саму файловую систему на этом разделе. Заходим по ssh"
---

Иногда, так случается, что надо расширить диск для какого-то EC2 инстанса. Это можно сделать не останавливая сам инстанс, чтоб не прерывать работу сервиса.

Для этого заходим в веб-консоль AWS, находим нужный volume и увеличиваем его размер.

Потом нужно увеличить раздел и саму файловую систему на этом разделе. Заходим по ssh на инстанс и расширяем раздел:

`$ sudo growpart /dev/xvda 1
`Получаем что-то типа:

`CHANGED: partition=1 start=2048 old: size=16775135 end=16777183 new: size=41940959,end=41943007
`Теперь даем понять ядру, что надо перечитать новую таблицу разделов:

`$ sudo partprobe
`И расширяем файловую систему:

`$ sudo resize2fs /dev/xvda1
`Результат:

`resize2fs 1.42.13 (17-May-2015)
Filesystem at /dev/xvda1 is mounted on /; on-line resizing required
old_desc_blocks = 1, new_desc_blocks = 2
The filesystem on /dev/xvda1 is now 5242619 (4k) blocks long.
``on-line resizing required` говорит о том, что файловая система была расширена.
